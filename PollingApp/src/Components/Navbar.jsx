import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';

const Navbar = () => {
    const [menuOpen, setMenuOpen] = useState(false);
    const name = localStorage.getItem("PollUserName");
    const navigate = useNavigate();

    const handleLogout = () => {
        localStorage.removeItem('PollUserName');
        navigate("/");
    };

    return (
        <nav className="bg-gray-800 text-white shadow">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex justify-between items-center h-16">
                    {/* Logo */}
                    <div className="flex items-center">
                     { name ?  <Link to='/dashboard'>
                            <svg className="text-gray-900 dark:text-white h-6 w-auto mr-2" width="482" height="74" viewBox="0 0 482 74" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
                                <title>StrawPoll</title>
                                <path id="Pfad" fill="currentColor" stroke="none" d="M 106.669983 72.380005 C 92.73999 72.380005 81.980011 65.079987 81.790009 52.380005 L 96.200012 52.380005 C 96.589996 57.76001 100.140015 61.309998 106.380005 61.309998 C 112.619995 61.309998 116.469971 57.950012 116.469971 53.149994 C 116.469971 38.640015 81.890015 47.380005 81.980011 23.079987 C 81.980011 10.970001 91.779999 3.670013 105.619995 3.670013 C 119.460022 3.670013 128.77002 10.670013 129.619995 22.790009 L 114.840027 22.790009 C 114.549988 18.369995 111 14.910004 105.22998 14.790009 C 99.950012 14.589996 96.01001 17.190002 96.01001 22.660004 C 96.01001 36.109985 130.400024 28.660004 130.400024 52.25 C 130.400024 62.869995 122 72.380005 106.669983 72.380005 Z"></path>
                                <path id="path1" fill="currentColor" stroke="none" d="M 134.530029 29.540009 L 134.530029 5.329987 L 148.070007 5.329987 L 148.070007 18.48999 L 160 18.48999 L 160 29.540009 L 148.070007 29.540009 L 148.070007 55.279999 C 148.070007 58.839996 149.51001 60.369995 153.73999 60.369995 L 160 60.369995 L 160 71.709991 L 151.539978 71.709991 C 141.359985 71.709991 134.539978 67.390015 134.539978 55.190002 Z"></path>
                                <path id="path2" fill="currentColor" stroke="none" d="M 179.289978 71.709991 L 165.840027 71.709991 L 165.840027 18.48999 L 179.289978 18.48999 L 179.289978 26.75 C 182.706909 21.019379 188.950195 17.578491 195.619995 17.75 L 195.619995 31.869995 L 192.070007 31.869995 C 184.070007 31.869995 179.289978 34.940002 179.289978 45.220001 Z"></path>
                                <path id="path3" fill="currentColor" stroke="none" d="M 219.73999 17.619995 C 228.289978 17.619995 234.150024 21.619995 237.320007 26.079987 L 237.320007 18.48999 L 250.859985 18.48999 L 250.859985 71.709991 L 237.320007 71.709991 L 237.320007 63.929993 C 234.150024 68.540009 228.090027 72.570007 219.640015 72.570007 C 206.190002 72.570007 195.429993 61.519989 195.429993 44.910004 C 195.429993 28.299988 206.190002 17.619995 219.73999 17.619995 Z M 223.190002 29.440002 C 215.98999 29.440002 209.190002 34.820007 209.190002 44.910004 C 209.190002 55 216.01001 60.76001 223.190002 60.76001 C 230.590027 60.76001 237.320007 55.190002 237.320007 45.100006 C 237.320007 35.01001 230.590027 29.440002 223.190002 29.440002 Z"></path>
                                <path id="path4" fill="currentColor" stroke="none" d="M 254.219971 18.48999 L 267.859985 18.48999 L 277.27002 59 L 287.460022 18.459991 L 301.679993 18.459991 L 311.679993 58.899994 L 321.090027 18.459991 L 334 18.459991 L 318.440002 71.679993 L 303.880005 71.679993 L 294.179993 34.5 L 284.47998 71.679993 L 269.880005 71.679993 Z"></path>
                                <path id="path5" fill="currentColor" stroke="none" d="M 362.099976 46 L 350.859985 46 L 350.859985 71.75 L 337.409973 71.75 L 337.409973 4.649994 L 362.099976 4.649994 C 378.22998 4.649994 386.299988 13.779999 386.299988 25.399994 C 386.299988 35.589996 379.390015 46 362.099976 46 Z M 361.52002 35.149994 C 369.109985 35.149994 372.52002 31.399994 372.52002 25.440002 C 372.52002 19.299988 369.159973 15.640015 361.52002 15.640015 L 350.859985 15.640015 L 350.859985 35.149994 Z"></path>
                                <path id="path6" fill="currentColor" stroke="none" d="M 413 72.570007 C 397.630005 72.570007 386 61.809998 386 45.100006 C 386 28.390015 398 17.619995 413.380005 17.619995 C 428.76001 17.619995 440.75 28.290009 440.75 45.100006 C 440.75 61.910004 428.47998 72.570007 413 72.570007 Z M 413 60.850006 C 420.109985 60.850006 426.929993 55.670013 426.929993 45.100006 C 426.929993 34.529999 420.299988 29.339996 413.190002 29.339996 C 406.080017 29.339996 399.650024 34.429993 399.650024 45.100006 C 399.650024 55.769989 405.809998 60.850006 413 60.850006 Z"></path>
                                <path id="path7" fill="currentColor" stroke="none" d="M 446.150024 0.619995 L 459.599976 0.619995 L 459.599976 71.709991 L 446.150024 71.709991 Z"></path>
                                <path id="path8" fill="currentColor" stroke="none" d="M 468.349976 0.619995 L 481.799988 0.619995 L 481.799988 71.709991 L 468.349976 71.709991 Z"></path>
                                <path id="path9" fill="#f87171" stroke="none" d="M 22.890015 50.700012 L 45.570007 5.329987 L 22.890015 5.329987 C 10.364166 5.324463 0.205536 15.474182 0.200012 28 L 0.200012 28 C 0.197357 34.019501 2.586731 39.793365 6.842224 44.05072 C 11.097687 48.308075 16.870514 50.700012 22.890015 50.700012 Z"></path>
                                <path id="path10" fill="#818cf8" stroke="none" d="M 45.570007 28 L 22.890015 73.369995 L 45.570007 73.369995 C 58.097443 73.369995 68.254486 63.217438 68.26001 50.690002 L 68.26001 50.690002 C 68.26001 38.158661 58.101349 28 45.570007 28 Z"></path>
                            </svg>
                        </Link> : <Link to='/'>
                            <svg className="text-gray-900 dark:text-white h-6 w-auto mr-2" width="482" height="74" viewBox="0 0 482 74" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
                                <title>StrawPoll</title>
                                <path id="Pfad" fill="currentColor" stroke="none" d="M 106.669983 72.380005 C 92.73999 72.380005 81.980011 65.079987 81.790009 52.380005 L 96.200012 52.380005 C 96.589996 57.76001 100.140015 61.309998 106.380005 61.309998 C 112.619995 61.309998 116.469971 57.950012 116.469971 53.149994 C 116.469971 38.640015 81.890015 47.380005 81.980011 23.079987 C 81.980011 10.970001 91.779999 3.670013 105.619995 3.670013 C 119.460022 3.670013 128.77002 10.670013 129.619995 22.790009 L 114.840027 22.790009 C 114.549988 18.369995 111 14.910004 105.22998 14.790009 C 99.950012 14.589996 96.01001 17.190002 96.01001 22.660004 C 96.01001 36.109985 130.400024 28.660004 130.400024 52.25 C 130.400024 62.869995 122 72.380005 106.669983 72.380005 Z"></path>
                                <path id="path1" fill="currentColor" stroke="none" d="M 134.530029 29.540009 L 134.530029 5.329987 L 148.070007 5.329987 L 148.070007 18.48999 L 160 18.48999 L 160 29.540009 L 148.070007 29.540009 L 148.070007 55.279999 C 148.070007 58.839996 149.51001 60.369995 153.73999 60.369995 L 160 60.369995 L 160 71.709991 L 151.539978 71.709991 C 141.359985 71.709991 134.539978 67.390015 134.539978 55.190002 Z"></path>
                                <path id="path2" fill="currentColor" stroke="none" d="M 179.289978 71.709991 L 165.840027 71.709991 L 165.840027 18.48999 L 179.289978 18.48999 L 179.289978 26.75 C 182.706909 21.019379 188.950195 17.578491 195.619995 17.75 L 195.619995 31.869995 L 192.070007 31.869995 C 184.070007 31.869995 179.289978 34.940002 179.289978 45.220001 Z"></path>
                                <path id="path3" fill="currentColor" stroke="none" d="M 219.73999 17.619995 C 228.289978 17.619995 234.150024 21.619995 237.320007 26.079987 L 237.320007 18.48999 L 250.859985 18.48999 L 250.859985 71.709991 L 237.320007 71.709991 L 237.320007 63.929993 C 234.150024 68.540009 228.090027 72.570007 219.640015 72.570007 C 206.190002 72.570007 195.429993 61.519989 195.429993 44.910004 C 195.429993 28.299988 206.190002 17.619995 219.73999 17.619995 Z M 223.190002 29.440002 C 215.98999 29.440002 209.190002 34.820007 209.190002 44.910004 C 209.190002 55 216.01001 60.76001 223.190002 60.76001 C 230.590027 60.76001 237.320007 55.190002 237.320007 45.100006 C 237.320007 35.01001 230.590027 29.440002 223.190002 29.440002 Z"></path>
                                <path id="path4" fill="currentColor" stroke="none" d="M 254.219971 18.48999 L 267.859985 18.48999 L 277.27002 59 L 287.460022 18.459991 L 301.679993 18.459991 L 311.679993 58.899994 L 321.090027 18.459991 L 334 18.459991 L 318.440002 71.679993 L 303.880005 71.679993 L 294.179993 34.5 L 284.47998 71.679993 L 269.880005 71.679993 Z"></path>
                                <path id="path5" fill="currentColor" stroke="none" d="M 362.099976 46 L 350.859985 46 L 350.859985 71.75 L 337.409973 71.75 L 337.409973 4.649994 L 362.099976 4.649994 C 378.22998 4.649994 386.299988 13.779999 386.299988 25.399994 C 386.299988 35.589996 379.390015 46 362.099976 46 Z M 361.52002 35.149994 C 369.109985 35.149994 372.52002 31.399994 372.52002 25.440002 C 372.52002 19.299988 369.159973 15.640015 361.52002 15.640015 L 350.859985 15.640015 L 350.859985 35.149994 Z"></path>
                                <path id="path6" fill="currentColor" stroke="none" d="M 413 72.570007 C 397.630005 72.570007 386 61.809998 386 45.100006 C 386 28.390015 398 17.619995 413.380005 17.619995 C 428.76001 17.619995 440.75 28.290009 440.75 45.100006 C 440.75 61.910004 428.47998 72.570007 413 72.570007 Z M 413 60.850006 C 420.109985 60.850006 426.929993 55.670013 426.929993 45.100006 C 426.929993 34.529999 420.299988 29.339996 413.190002 29.339996 C 406.080017 29.339996 399.650024 34.429993 399.650024 45.100006 C 399.650024 55.769989 405.809998 60.850006 413 60.850006 Z"></path>
                                <path id="path7" fill="currentColor" stroke="none" d="M 446.150024 0.619995 L 459.599976 0.619995 L 459.599976 71.709991 L 446.150024 71.709991 Z"></path>
                                <path id="path8" fill="currentColor" stroke="none" d="M 468.349976 0.619995 L 481.799988 0.619995 L 481.799988 71.709991 L 468.349976 71.709991 Z"></path>
                                <path id="path9" fill="#f87171" stroke="none" d="M 22.890015 50.700012 L 45.570007 5.329987 L 22.890015 5.329987 C 10.364166 5.324463 0.205536 15.474182 0.200012 28 L 0.200012 28 C 0.197357 34.019501 2.586731 39.793365 6.842224 44.05072 C 11.097687 48.308075 16.870514 50.700012 22.890015 50.700012 Z"></path>
                                <path id="path10" fill="#818cf8" stroke="none" d="M 45.570007 28 L 22.890015 73.369995 L 45.570007 73.369995 C 58.097443 73.369995 68.254486 63.217438 68.26001 50.690002 L 68.26001 50.690002 C 68.26001 38.158661 58.101349 28 45.570007 28 Z"></path>
                            </svg>
                        </Link>}
                    </div>

                    {/* Hamburger for mobile */}
                    <div className="md:hidden flex items-center">
                        {name && (
                            <button
                                onClick={() => setMenuOpen(!menuOpen)}
                                className="text-white focus:outline-none"
                            >
                                <svg
                                    className="h-6 w-6"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    {menuOpen ? (
                                        <path
                                            strokeLinecap="round"
                                            strokeLinejoin="round"
                                            strokeWidth={2}
                                            d="M6 18L18 6M6 6l12 12"
                                        />
                                    ) : (
                                        <path
                                            strokeLinecap="round"
                                            strokeLinejoin="round"
                                            strokeWidth={2}
                                            d="M4 6h16M4 12h16M4 18h16"
                                        />
                                    )}
                                </svg>
                            </button>
                        )}
                    </div>

                    {/* Desktop Menu */}
                    {name && (
                        <div className="hidden md:flex space-x-6 items-center">
                            <Link to="/create-poll" className="hover:text-gray-300">
                                Create Poll
                            </Link>
                            <Link to="/dashboard" className="hover:text-gray-300">
                                My Polls
                            </Link>
                            <Link to="/explore" className="hover:text-gray-300">
                                Explore Polls
                            </Link>
                            <button
                                onClick={handleLogout}
                                className="bg-red-600 hover:bg-red-700 px-4 py-1.5 rounded text-white"
                            >
                                Logout
                            </button>
                        </div>
                    )}
                </div>
            </div>

            {/* Mobile Menu */}
            {menuOpen && name && (
                <div className="md:hidden px-4 pb-4 space-y-2">
                    <Link to="/create-poll" className="block hover:text-gray-300" onClick={() => setMenuOpen(false)}>
                        Create Poll
                    </Link>
                    <Link to="/dashboard" className="block hover:text-gray-300" onClick={() => setMenuOpen(false)}>
                        My Polls
                    </Link>
                    <Link to="/explore" className="block hover:text-gray-300" onClick={() => setMenuOpen(false)}>
                        Explore Polls
                    </Link>
                    <button
                        onClick={() => {
                            setMenuOpen(false);
                            handleLogout();
                        }}
                        className="w-full text-left text-white bg-red-600 hover:bg-red-700 px-4 py-2 rounded"
                    >
                        Logout
                    </button>
                </div>
            )}
        </nav>
    );
};

export default Navbar;

